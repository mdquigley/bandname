<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bandname</title>
    <link rel="icon" type="image/png" href="img/bandname.png">
    <link rel="stylesheet" href="style.css">



</head>

<body>
    <div id="page-container">
        <div id="content">
            <h1 id="title">
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"
                    viewBox="0 -255 1143.000000 671.000000" preserveAspectRatio="xMidYMid meet">
                    <metadata>
                        Created by potrace 1.16, written by Peter Selinger 2001-2019
                    </metadata>
                    <g transform="translate(0.000000,671.000000) scale(0.100000,-0.100000)" fill="#ab6868"
                        stroke="none">
                        <path d="M2 6677 c2 -22 643 -1215 1803 -3355 l1799 -3322 3899 0 3899 0 -24
43 c-13 23 -831 1533 -1818 3355 l-1794 3312 -3884 0 -3883 0 3 -33z" />
                    </g>
                </svg>

                <span>bandname</span>
            </h1>

            <p id="description" class="container">Check to see if your ideal Bandcamp URL is available before settling
                on
                that
                sick new band name.
            </p>

            <div id="form" class="container">
                <label for="input">Enter band name: </label><input id="input" name="input" type="text" required
                    placeholder="bandnamewithnospaces">
                <button id="submit">Look Up</button>
            </div>

            <h3 id="result" class="container"><span id="warning"></span><span id="name"></span><span id="avail"></span>
            </h3>

            <footer class="container">
                <p>site by <a href="https://quig.info">quigley</a> | <a
                        href="https://github.com/mdquigley/bandname">source</a>
                </p>
            </footer>

            <script>

                const submit = document.getElementById('submit');
                const input = document.getElementById('input');
                const name = document.getElementById('name');
                const avail = document.getElementById('avail');
                const warning = document.getElementById('warning');


                const signupURL = "https://bandcamp.com/signup?new_domain=";

                const regex = /^[a-z0-9][a-z0-9-]+[a-z0-9]$/i;

                function validateInput(text) {
                    return text.match(regex);
                }

                submit.onclick = function lookUp() {

                    if (validateInput(input.value)) {

                        const bandname = input.value;
                        const url = 'https://' + bandname + '.bandcamp.com';

                        const myRequest = new Request(url);
                        fetch(myRequest).then(function (response) {

                            name.innerText = bandname;
                            warning.innerText = (response.url.includes(signupURL) ? 'ü§ò\n' : 'üò≠\n');
                            avail.innerText = '.bandcamp.com is ' + (response.url.includes(signupURL) ? 'available!' : 'not available');

                        })
                    } else if (input.value !== "") {
                        name.innerText = '';
                        warning.innerText = '‚ö†Ô∏è\n';
                        avail.innerText = 'Band names must start and end with a letter or number, and may include dashes anywhere in the middle.\n\ngood-example123 ‚úÖ\n-bad-example- ‚ùå';
                    } else {
                        name.innerText = '';
                        warning.innerText = '';
                        avail.innerText = '';
                    }
                }

                input.addEventListener('keyup', function (event) {
                    if (event.keyCode === 13) {
                        submit.click();
                    }
                });


            </script>




        </div>
    </div>
</body>

</html>